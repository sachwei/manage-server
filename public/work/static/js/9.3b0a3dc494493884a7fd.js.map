{"version":3,"sources":["webpack:///./src/modules/bug/components/bug-orbit.vue?9f5c","webpack:///./src/modules/bug/components/bug-orbit.vue","webpack:///src/modules/bug/components/bug-list.vue","webpack:///src/modules/bug/components/bug-orbit.vue","webpack:///./src/modules/bug/components/bug-list.vue?f76d","webpack:///./src/modules/bug/components/bug-list.vue","webpack:///src/modules/bug/pages/BugList.vue","webpack:///./src/modules/bug/pages/BugList.vue?9f04","webpack:///./src/modules/bug/pages/BugList.vue"],"names":["components_bug_orbit","render","_vm","this","_h","$createElement","_c","_self","attrs","placement","width","trigger","on","show","$event","onShowBugOrbit","bug","id","_l","item","index","key","_id","_v","_s","staticClass","_f","optUserId","userList","enumFormatter","state","toUserId","optTime","slot","curUserId","staticRenderFns","bug_list","bugOrbit","__webpack_require__","normalizeComponent","_this","data","cellValue","ssrContext","filterBugList","calcFilter","methods","extends_default","_this2","name","commitUser","_this3","value","components_bug_list","staticStyle","bugList","border","height","tableHeight","type","prop","align","label","scopedSlots","_u","fn","scope","hasImage","row","attachs","_e","hasVedio","click","onBugEdit","formatter","levelFormater","filters","levelFilter","filter-method","filterHandler","stateFormater","stateFilter","userFormatter","userFilter","dateFormatter","onCopy","onDelete","bug_list_Component","bug_list_normalizeComponent","__webpack_exports__","undefined","selectProductId","fingBugList","sprintId","sprintSelect","sprint_select","productSelect","product_select","productId","findCondition","pages_BugList","model","callback","$$v","expression","onAnalyse","onExport","mode","appear","Component","BugList"],"mappings":"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","file":"static/js/9.3b0a3dc494493884a7fd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-popover',{attrs:{\"placement\":\"bottom-end\",\"width\":\"300\",\"trigger\":\"click\"},on:{\"show\":function($event){_vm.onShowBugOrbit(_vm.bug.id)}}},[_c('ul',_vm._l((_vm.bugOrbit),function(item,index){return _c('li',{key:item._id},[_c('span',[_vm._v(_vm._s(index + 1)+\".\\n        \"),_c('span',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm._f(\"userFilter\")(item.optUserId,_vm.userList)))]),_vm._v(\" \"),(item.fromUserId)?_c('span',[_c('span',[_vm._v(\"将单据状态置为“\"+_vm._s(_vm.enumFormatter('BUG_STATE', item.state))+\"”\")]),_vm._v(\" \"),_c('span',[_vm._v(\", 给了\")]),_vm._v(\" \"),_c('span',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm._f(\"userFilter\")(item.toUserId,_vm.userList)))])]):_c('span',[_vm._v(\"创建了该缺陷单\")]),_vm._v(\" \"),_c('span',{staticClass:\"opt-time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFilter\")(item.optTime,'MM-dd hh:mm:ss')))])])])})),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"userFilter\")(_vm.bug.curUserId,_vm.userList)))]),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-angle-double-down margin-left-5\"})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-947bba74\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/bug/components/bug-orbit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-947bba74\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./bug-orbit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bug-orbit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bug-orbit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-947bba74\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bug-orbit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-947bba74\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/bug/components/bug-orbit.vue\n// module id = null\n// module chunks = ","<template>\r\n  <el-table :data=\"bugList\" border style=\"width: 100%\" :height=\"tableHeight\">\r\n    <el-table-column type=\"index\" width=\"45\"></el-table-column>\r\n    <el-table-column prop=\"id\" align=\"center\" width=\"70\" label=\"编码\"></el-table-column>\r\n    <el-table-column prop=\"name\" label=\"摘要\">\r\n      <template slot-scope=\"scope\">\r\n        <div>\r\n          <i v-if=\"hasImage(scope.row.attachs)\" class=\"fa fa-image margin-left-5\"></i>\r\n          <i v-if=\"hasVedio(scope.row.attachs)\" class=\"fa fa-film\"></i>\r\n          <span class=\"bug-summary\" @click='onBugEdit(scope.row)'>{{scope.row.name}}</span>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"level\"\r\n      width=\"80\"\r\n      :formatter=\"levelFormater\"\r\n      :filters=\"levelFilter\"\r\n      :filter-method=\"filterHandler\"\r\n      label=\"等级\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"state\"\r\n      width=\"80\"\r\n      :formatter=\"stateFormater\"\r\n      :filters=\"stateFilter\"\r\n      :filter-method=\"filterHandler\"\r\n      label=\"状态\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"commitUser\"\r\n      width=\"90\"\r\n      :formatter=\"userFormatter\"\r\n      :filters=\"userFilter\"\r\n      :filter-method=\"filterHandler\"\r\n      label=\"提交人\">\r\n    </el-table-column>\r\n    <el-table-column prop=\"curUserId\" width=\"110\" label=\"当前处理人\">\r\n      <template slot-scope=\"scope\">\r\n        <bug-orbit :bug=\"scope.row\"></bug-orbit>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column prop=\"createTime\" width=\"100\" :formatter=\"dateFormatter\" label=\"创建时间\"></el-table-column>\r\n    <el-table-column label=\"操作\" width=\"140\">\r\n      <template slot-scope=\"scope\">\r\n        <div class=\"quick-operation\">\r\n          <i class=\"fa fa-edit\" @click=\"onBugEdit(scope.row)\"></i>\r\n          <i class=\"fa fa-copy\" @click=\"onCopy(scope.row)\"></i>\r\n          <i class=\"fa fa-trash\" @click=\"onDelete(scope.row)\"></i>\r\n        </div>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex'\r\nimport bugOrbit from './bug-orbit'\r\nexport default {\r\n  data () {\r\n    return {\r\n      levels: [],\r\n      levelFilter: [],\r\n      states: [],\r\n      stateFilter: [],\r\n      userFilter: [],\r\n      tableName: 'bugs'\r\n    }\r\n  },\r\n  components: {\r\n    bugOrbit\r\n  },\r\n  computed: {\r\n    userList () {\r\n      return this.$store.state.userList\r\n    },\r\n    bugList () {\r\n      return this.$store.getters.filterBugList\r\n    },\r\n    tableHeight () {\r\n      return this.$utils.getClientHeight() - 120\r\n    }\r\n  },\r\n  watch: {\r\n    bugList () {\r\n      this.calcFilter()\r\n    }\r\n  },\r\n  methods: {\r\n    initData () {\r\n      this.$enumService.getEnum('BUG_LEVEL').then((data) => {\r\n        this.levels = data\r\n        return this.$enumService.getEnum('BUG_STATE')\r\n      }).then((data) => {\r\n        this.states = data\r\n        this.calcFilter()\r\n      })\r\n    },\r\n    calcFilter () {\r\n      this.levelFilter = []\r\n      this.stateFilter = []\r\n      this.userFilter = []\r\n\r\n      this.levels.forEach(item => {\r\n        this.levelFilter.push({\r\n          text: item.name,\r\n          value: item.id\r\n        })\r\n      })\r\n\r\n      this.states.forEach(item => {\r\n        this.stateFilter.push({\r\n          text: item.name,\r\n          value: item.id\r\n        })\r\n      })\r\n\r\n      this.bugList.forEach(item => {\r\n        if (!this.userFilter.find(user => user.value === item.commitUser)) {\r\n          this.userFilter.push({\r\n            text: this.$utils.userFormatter(item.commitUser, this.userList),\r\n            value: item.commitUser\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getId () {\r\n      return this.getSequence('bug_key')\r\n    },\r\n    onCopy (bug) {\r\n      this.getId().then((id) => {\r\n        this.curData = this.$utils.deepCopy(bug)\r\n        this.curData.id = id\r\n        this.curData.commentId = ''\r\n        this.curData.attachs = []\r\n        this.curData.name = this.curData.name + '[复制]'\r\n        delete this.curData._id\r\n        this.doAdd().then((data) => {\r\n          this.addBug(data)\r\n        })\r\n      })\r\n    },\r\n    hasImage (attachs) {\r\n      return attachs.find(item => item.type.indexOf('image') !== -1)\r\n    },\r\n    hasVedio (attachs) {\r\n      return attachs.find(item => item.type.indexOf('video') !== -1)\r\n    },\r\n    onBugEdit (bug) {\r\n      this.$router.push({ path: 'list/detail', query: { id: bug.id } })\r\n    },\r\n    doAfterDelete (bug) {\r\n      this.deleteBug(bug._id)\r\n      this.doDeleteBugOrbit(bug)\r\n    },\r\n    doDeleteBugOrbit (bug) {\r\n      this.$dataService.delete(this.$apiUrl.BASE_DELETE + 'bugs', { bugId: bug.id })\r\n    },\r\n    levelFormater (row, column, cellValue) {\r\n      return this.$enumService.enumFormat('BUG_LEVEL', cellValue)\r\n    },\r\n    stateFormater (row, column, cellValue) {\r\n      return this.$enumService.enumFormat('BUG_STATE', cellValue)\r\n    },\r\n    filterHandler (value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n    ...mapMutations(['deleteBug', 'addBug'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .el-icon-arrow-down:before{\r\n    font-size: 14px;\r\n    margin-left: 5px;\r\n  }\r\n</style>\r\n\r\n<style scoped lang=\"scss\">\r\n  .bug-summary{\r\n    cursor: pointer;\r\n  }\r\n\r\n  .fa-angle-double-down{\r\n    cursor: pointer;\r\n  }\r\n\r\n  .quick-operation{\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n\r\n    .fa-trash{\r\n      color: #F56C6C !important;\r\n    }\r\n\r\n    .fa{\r\n      margin-right: 5px;\r\n      color: #409EFF;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/modules/bug/components/bug-list.vue","<template>\r\n  <el-popover\r\n    placement=\"bottom-end\"\r\n    width=\"300\"\r\n    @show=\"onShowBugOrbit(bug.id)\"\r\n    trigger=\"click\">\r\n    <ul>\r\n      <li v-for=\"(item, index) in bugOrbit\" :key=\"item._id\">\r\n        <span>{{ index + 1 }}.\r\n          <span class=\"user-name\">{{ item.optUserId | userFilter(userList) }}</span>\r\n          <span v-if=\"item.fromUserId\">\r\n            <span>将单据状态置为“{{ enumFormatter('BUG_STATE', item.state) }}”</span>\r\n            <span>, 给了</span>\r\n            <span class=\"user-name\">{{ item.toUserId | userFilter(userList) }}</span>\r\n          </span>\r\n          <span v-else>创建了该缺陷单</span>\r\n          <span class=\"opt-time\"> {{ item.optTime | dateFilter('MM-dd hh:mm:ss') }}</span>\r\n        </span>\r\n      </li>\r\n    </ul>\r\n    <div slot=\"reference\">\r\n      <span>{{bug.curUserId | userFilter(userList)}}</span>\r\n      <i class=\"fa fa-angle-double-down margin-left-5\"></i>\r\n    </div>\r\n  </el-popover>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: [\r\n    'bug'\r\n  ],\r\n  data () {\r\n    return {\r\n      bugOrbit: []\r\n    }\r\n  },\r\n  computed: {\r\n    userList () {\r\n      return this.$store.state.userList\r\n    }\r\n  },\r\n  methods: {\r\n    onShowBugOrbit (id) {\r\n      this.findCondition = {\r\n        bugId: id\r\n      }\r\n      this.findDataByCondition('bugOrbit').then((data) => {\r\n        this.bugOrbit = data\r\n      })\r\n    },\r\n    stateFormater (row, column, cellValue) {\r\n      return this.$enumService.enumFormat('BUG_STATE', cellValue)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  ul {\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n\r\n    li {\r\n      display: flex;\r\n      align-items: center;\r\n      line-height: 24px;\r\n      font-size: 14px;\r\n      color: #333;\r\n      border-bottom: 1px solid #eee;\r\n      padding: 5px 0;\r\n\r\n      .opt-time {\r\n        color: #aaa;\r\n      }\r\n\r\n      .user-name{\r\n        font-weight: bold;\r\n      }\r\n    }\r\n  }\r\n  .fa-angle-double-down{\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/modules/bug/components/bug-orbit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.bugList,\"border\":\"\",\"height\":_vm.tableHeight}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"45\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"align\":\"center\",\"width\":\"70\",\"label\":\"编码\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"摘要\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.hasImage(scope.row.attachs))?_c('i',{staticClass:\"fa fa-image margin-left-5\"}):_vm._e(),_vm._v(\" \"),(_vm.hasVedio(scope.row.attachs))?_c('i',{staticClass:\"fa fa-film\"}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"bug-summary\",on:{\"click\":function($event){_vm.onBugEdit(scope.row)}}},[_vm._v(_vm._s(scope.row.name))])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"level\",\"width\":\"80\",\"formatter\":_vm.levelFormater,\"filters\":_vm.levelFilter,\"filter-method\":_vm.filterHandler,\"label\":\"等级\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"state\",\"width\":\"80\",\"formatter\":_vm.stateFormater,\"filters\":_vm.stateFilter,\"filter-method\":_vm.filterHandler,\"label\":\"状态\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"commitUser\",\"width\":\"90\",\"formatter\":_vm.userFormatter,\"filters\":_vm.userFilter,\"filter-method\":_vm.filterHandler,\"label\":\"提交人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"curUserId\",\"width\":\"110\",\"label\":\"当前处理人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('bug-orbit',{attrs:{\"bug\":scope.row}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"width\":\"100\",\"formatter\":_vm.dateFormatter,\"label\":\"创建时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"140\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"quick-operation\"},[_c('i',{staticClass:\"fa fa-edit\",on:{\"click\":function($event){_vm.onBugEdit(scope.row)}}}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-copy\",on:{\"click\":function($event){_vm.onCopy(scope.row)}}}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-trash\",on:{\"click\":function($event){_vm.onDelete(scope.row)}}})])]}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-87f71a32\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/bug/components/bug-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-87f71a32\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./bug-list.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-87f71a32\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./bug-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bug-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bug-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-87f71a32\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bug-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-87f71a32\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/bug/components/bug-list.vue\n// module id = null\n// module chunks = ","<template>\r\n  <panel>\r\n    <div class=\"bug-list-wrapper\">\r\n      <div class=\"bug-list-toolbar\">\r\n        <div class=\"toolbar-left\">\r\n          <product-select class=\"product-select\" v-model=\"selectProductId\" ></product-select>\r\n          <sprint-select class=\"sprint-select margin-left-5\" :state=\"[1,2,3]\" :productId=\"productId\" v-model=\"sprintId\"></sprint-select>\r\n        </div>\r\n        <div class=\"toolbar-right\">\r\n          <i @click=\"onAnalyse\" class=\"fa fa-pie-chart margin-right-10\"></i>\r\n          <i @click=\"onExport\" class=\"fa fa-download margin-right-10\"></i>\r\n        </div>\r\n      </div>\r\n      <bug-list></bug-list>\r\n    </div>\r\n    <transition mode=\"out-in\" name=\"fade\" appear>\r\n      <router-view></router-view>\r\n    </transition>\r\n  </panel>\r\n</template>\r\n\r\n<script>\r\nimport bugList from '../components/bug-list'\r\nimport sprintSelect from '../../../components/select/sprint-select'\r\nimport productSelect from '../../../components/select/product-select'\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      selectProductId: undefined,\r\n      sprintId: undefined,\r\n      tableName: 'bugs'\r\n    }\r\n  },\r\n  computed: {\r\n    productId () {\r\n      return this.selectProductId\r\n    }\r\n  },\r\n  watch: {\r\n    selectProductId () {\r\n      this.fingBugList()\r\n    },\r\n    sprintId () {\r\n      this.setCurSprintId(this.sprintId)\r\n      this.fingBugList()\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    this.$localStore.set('bugListCondition', {\r\n      productId: this.selectProductId,\r\n      sprintId: this.sprintId\r\n    })\r\n  },\r\n  components: {\r\n    bugList,\r\n    sprintSelect,\r\n    productSelect\r\n  },\r\n  methods: {\r\n    initParam () {\r\n      let condition = this.$localStore.get('bugListCondition')\r\n      if (condition) {\r\n        this.selectProductId = condition.productId\r\n        this.sprintId = condition.sprintId\r\n      }\r\n    },\r\n    initData () {\r\n      this.setBugList([])\r\n    },\r\n    fingBugList () {\r\n      this.findCondition = {\r\n        productId: this.productId,\r\n        sprintId: this.sprintId\r\n      }\r\n      this.findDataByCondition().then(data => {\r\n        setTimeout(() => {\r\n          this.setBugList(data)\r\n        }, 500)\r\n      })\r\n    },\r\n    onAnalyse () {\r\n      this.$router.push({ name: 'bugAnalyse' })\r\n    },\r\n    onExport () {\r\n      let condition = {\r\n        query: this.findCondition,\r\n        sort: { 'createTime': -1 }\r\n      }\r\n      this.$http.post('/excel/export/bug', condition, { responseType: 'arraybuffer' }).then((res) => {\r\n        if (res && res.data) {\r\n          this.downloadExcel(res.data, 'bugFile.xls')\r\n        }\r\n      })\r\n    },\r\n    ...mapMutations(['setCurSprintId', 'setBugList'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .bug-list-wrapper{\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    width: 100%;\r\n\r\n    .bug-list-toolbar{\r\n      display: flex;\r\n      margin-bottom: 10px;\r\n\r\n      .product-select, .sprint-select{\r\n        width: 200px !important;\r\n      }\r\n\r\n      .toolbar-left{\r\n        flex: 1 1 600px;\r\n      }\r\n      .toolbar-right{\r\n        justify-content: flex-end;\r\n        display: flex;\r\n        align-items: center;\r\n        color: #aaa;\r\n        font-size: 20px;\r\n\r\n        .fa:hover{\r\n          color: #555;\r\n        }\r\n\r\n        .fa{\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .fade-enter-active {\r\n    animation: fadeInDown .5s;\r\n  }\r\n  .fade-leave-active {\r\n    animation: fadeOutUp .5s;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/modules/bug/pages/BugList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('panel',[_c('div',{staticClass:\"bug-list-wrapper\"},[_c('div',{staticClass:\"bug-list-toolbar\"},[_c('div',{staticClass:\"toolbar-left\"},[_c('product-select',{staticClass:\"product-select\",model:{value:(_vm.selectProductId),callback:function ($$v) {_vm.selectProductId=$$v},expression:\"selectProductId\"}}),_vm._v(\" \"),_c('sprint-select',{staticClass:\"sprint-select margin-left-5\",attrs:{\"state\":[1,2,3],\"productId\":_vm.productId},model:{value:(_vm.sprintId),callback:function ($$v) {_vm.sprintId=$$v},expression:\"sprintId\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"toolbar-right\"},[_c('i',{staticClass:\"fa fa-pie-chart margin-right-10\",on:{\"click\":_vm.onAnalyse}}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-download margin-right-10\",on:{\"click\":_vm.onExport}})])]),_vm._v(\" \"),_c('bug-list')],1),_vm._v(\" \"),_c('transition',{attrs:{\"mode\":\"out-in\",\"name\":\"fade\",\"appear\":\"\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4450f5c4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/bug/pages/BugList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4450f5c4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BugList.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BugList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BugList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4450f5c4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BugList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4450f5c4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/bug/pages/BugList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}