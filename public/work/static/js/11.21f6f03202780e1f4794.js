webpackJsonp([11],{"/wXc":function(t,e){},Sn2i:function(t,e){},TDpP:function(t,e){},"h+IG":function(t,e){},k6Ju:function(t,e){},p33x:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("Dd8w"),r=a.n(l),i={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"user-choose-wrapper"},[t._l(t.team,function(e){return l("div",{key:e.email,staticClass:"user-item"},[l("img",{staticClass:"user-item-pic",attrs:{src:t.headUrl+e.email,alt:""}})])}),t._v(" "),l("img",{staticClass:"add-user-btn user-item-pic",attrs:{src:a("Ck/R"),alt:""},on:{click:t.onOpenAddDialog}}),t._v(" "),l("el-dialog",{attrs:{title:"新增团队成员",visible:t.addUserDialogVisible},on:{"update:visible":function(e){t.addUserDialogVisible=e}}},[l("el-form",{attrs:{model:t.userItemForm}},[l("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:"名称","label-width":"80px"}},[l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.userItemForm.email,callback:function(e){t.$set(t.userItemForm,"email",e)},expression:"userItemForm.email"}},t._l(t.userList,function(t){return l("el-option",{key:t.email,attrs:{label:t.userName,value:t.email}})}))],1),t._v(" "),l("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:"投入系数","label-width":"80px"}},[l("el-input-number",{staticStyle:{width:"200px"},attrs:{min:.1,step:.1,max:1},model:{value:t.userItemForm.rate,callback:function(e){t.$set(t.userItemForm,"rate",e)},expression:"userItemForm.rate"}})],1),t._v(" "),l("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:"备注","label-width":"80px"}},[l("el-input",{attrs:{type:"textarea",rows:3,"auto-complete":"off"},model:{value:t.userItemForm.note,callback:function(e){t.$set(t.userItemForm,"note",e)},expression:"userItemForm.note"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.addUserDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var s=a("VU/8")({data:function(){return{addUserDialogVisible:!1,userItemForm:{rate:1},headUrl:"",userList:[]}},props:["team"],methods:{initParam:function(){this.headUrl=this.$ccService.ccHeadUrl},initData:function(){var t=this;this.findDataByOrgId("users").then(function(e){t.userList=e})},onOpenAddDialog:function(){this.addUserDialogVisible=!0},onSave:function(){this.validate(this.userItemForm)?this.$message("该成员已存在。"):(this.team.push(this.userItemForm),this.userItemForm={rate:1},this.addUserDialogVisible=!1)},validate:function(t){return this.team.find(function(e){return e.email===t.email})}}},i,!1,function(t){a("Sn2i")},"data-v-8cab7b96",null).exports,o={data:function(){return{planMeetingForm:{date:new Date},addDialogVisible:!1}},props:["planMeetings"],methods:{onOpenAddDialog:function(){this.addDialogVisible=!0},onSave:function(){this.planMeetings.push(this.planMeetingForm),this.planMeetingForm={date:new Date},this.addDialogVisible=!1}}},n={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"plan-meeting-list-wrapper"},[t._l(t.planMeetings,function(e,a){return l("div",{key:a,staticClass:"meeting-item"},[l("span",[t._v(t._s(a+1)+"、")]),t._v(" "),l("span",[t._v(t._s(t._f("dateFilter")(e.date,"yyyy年MM月dd日")))]),t._v(" "),l("span",[t._v(t._s(e.note))])])}),t._v(" "),l("img",{staticClass:"add-btn meeting-item-pic",attrs:{src:a("Ck/R"),alt:""},on:{click:t.onOpenAddDialog}}),t._v(" "),l("el-dialog",{attrs:{title:"新增计划会议",visible:t.addDialogVisible},on:{"update:visible":function(e){t.addDialogVisible=e}}},[l("el-form",{attrs:{model:t.planMeetingForm}},[l("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:"日期","label-width":"80px"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.planMeetingForm.date,callback:function(e){t.$set(t.planMeetingForm,"date",e)},expression:"planMeetingForm.date"}})],1),t._v(" "),l("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:"主要内容","label-width":"80px"}},[l("el-input",{attrs:{type:"textarea",rows:3,"auto-complete":"off"},model:{value:t.planMeetingForm.note,callback:function(e){t.$set(t.planMeetingForm,"note",e)},expression:"planMeetingForm.note"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(t){a("h+IG")},"data-v-6b1a5642",null).exports,u={components:{ViewHtml:a("tbxb").a},props:["sprintId"],data:function(){return{tableName:"backlogs"}},computed:{userList:function(){return this.$store.state.userList}},methods:{initData:function(){var t=this;this.$nextTick(function(){t.findCondition={sprintId:t.sprintId},t.findDataByCondition()})},onBacklogView:function(t){this.$refs.viewHtml.show(t.how)},onAddData:function(){this.$router.push({name:"detail"})},onDelete:function(t){}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.dataList,"highlight-current-row":!0,"max-height":600,"default-sort":{prop:"important",order:"descending"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.tasks,border:""}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimate",label:"故事点",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userId",formatter:t.userFormatter,label:"用户"}}),t._v(" "),a("el-table-column",{attrs:{prop:"startDate",formatter:t.dateFormatter,label:"开始日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endDate",formatter:t.dateFormatter,label:"完成日期"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"important",label:"重要级别",sortable:"",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"track",label:"类别",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimate",label:"故事点",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uiUserId",label:"设计",formatter:t.userFormatter,width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"note",width:"120",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"backlog-operator"},[a("i",{staticClass:"fa fa-eye",on:{click:function(a){t.onBacklogView(e.row)}}})])]}}])})],1),t._v(" "),a("view-html",{ref:"viewHtml"})],1)},staticRenderFns:[]};var d=a("VU/8")(u,m,!1,function(t){a("k6Ju")},"data-v-2f3c975c",null).exports,p=a("NYxO"),v={components:{userChoose:s,planMeetingList:c,backlogList:d},data:function(){return{headUrl:"",tableName:"sprints",stateList:[],dataRule:{name:[{required:!0,trigger:"blur"}],value:[{required:!0,trigger:"blur"}],startDate:[{required:!0,trigger:"change"}],sm:[{required:!0,trigger:"change"}],po:[{required:!0,trigger:"change"}]}}},computed:{userList:function(){return this.$store.state.userList}},methods:r()({initParam:function(){var t=this,e=this.$route.params.id;e?this.curData=this.$store.getters.getSprint(e):this.getId().then(function(e){t.newDataForm(e)}),this.headUrl=this.$ccService.ccHeadUrl},initData:function(){var t=this;this.$enumService.getEnum("SPRINT_STATE").then(function(e){t.stateList=e})},onSave:function(){var t=this;this.validate().then(function(){t.curData._id?t.doUpdate().then(function(e){t.updateSprint(t.curData),t.goBack()}):t.newSprint(t.curData).then(function(e){t.curData=e,t.goBack()})})},doAfterDelete:function(t){this.deleteSprint(t._id),this.goBack()},getId:function(){return this.getSequence("sprint_key")},newDataForm:function(t){this.curData={id:t,name:"",value:"",sm:"",po:"",teams:[],startDate:new Date,publishDate:new Date,backlogs:[],planMeetings:[],demoMeeting:new Date,state:1,orgId:this.user.orgId}}},Object(p.d)(["updateSprint","deleteSprint"]),Object(p.b)(["newSprint"]))},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("panel",[a("div",{staticClass:"sprint-detail-wrapper"},[a("el-form",{ref:"dataForm",staticClass:"sprint-detail-form",staticStyle:{width:"98%"},attrs:{rules:t.dataRule,model:t.curData}},[a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("冲刺名称")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.curData.name,callback:function(e){t.$set(t.curData,"name",e)},expression:"curData.name"}})],1)],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("核心价值")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"value"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,"auto-complete":"off"},model:{value:t.curData.value,callback:function(e){t.$set(t.curData,"value",e)},expression:"curData.value"}})],1)],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("开始时间")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.curData.startDate,callback:function(e){t.$set(t.curData,"startDate",e)},expression:"curData.startDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("演示会议")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"demoMeeting"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.curData.demoMeeting,callback:function(e){t.$set(t.curData,"demoMeeting",e)},expression:"curData.demoMeeting"}})],1)],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("发版时间")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"publishDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.curData.publishDate,callback:function(e){t.$set(t.curData,"publishDate",e)},expression:"curData.publishDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("状态")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"state"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择任务分类"},model:{value:t.curData.state,callback:function(e){t.$set(t.curData,"state",e)},expression:"curData.state"}},t._l(t.stateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("SM")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"sm"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.curData.sm,callback:function(e){t.$set(t.curData,"sm",e)},expression:"curData.sm"}},t._l(t.userList,function(t){return a("el-option",{key:t.email,attrs:{label:t.userName,value:t.email}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("PO")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"po"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.curData.po,callback:function(e){t.$set(t.curData,"po",e)},expression:"curData.po"}},t._l(t.userList,function(t){return a("el-option",{key:t.email,attrs:{label:t.userName,value:t.email}})}))],1)],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("团队成员")])]),t._v(" "),a("el-col",{attrs:{span:22}},[a("user-choose",{attrs:{team:t.curData.teams}})],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("故事列表")])]),t._v(" "),a("el-col",{attrs:{span:21}},[a("backlog-list",{attrs:{sprintId:t.curData.id}})],1)],1),t._v(" "),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"el-form-item__label"},[t._v("计划会议")])]),t._v(" "),a("el-col",{attrs:{span:22}},[a("plan-meeting-list",{attrs:{planMeeting:t.curData.planMeetings}})],1)],1)],1),t._v(" "),a("div",{staticClass:"sprint-detail-footer"},[a("el-button",{on:{click:t.goBack}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.onDelete(t.curData)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")])],1)],1),t._v(" "),a("router-view")],1)},staticRenderFns:[]};var b=a("VU/8")(v,f,!1,function(t){a("TDpP"),a("/wXc")},"data-v-433ec69e",null);e.default=b.exports}});
//# sourceMappingURL=11.21f6f03202780e1f4794.js.map