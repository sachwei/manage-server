webpackJsonp([19],{"2kEa":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),r=i("auJG"),e=i("7NuJ"),c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"sprint-item-wrapper"},[i("div",{staticClass:"sprint-date"},[i("i",{staticClass:"fa fa-calendar"}),t._v(" "),i("span",[t._v(t._s(t._f("dateFilter")(t.sprint.startDate,"MM月")))])]),t._v(" "),i("el-card",{staticClass:"sprint-card"},[i("div",{staticClass:"sprint-header",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"header-left"},[3===t.sprint.state?i("i",{staticClass:"fa fa-check-circle-o fa-lg margin-right-5"}):i("i",{staticClass:"fa fa-play-circle fa-lg margin-right-5"}),t._v(" "),i("span",{staticClass:"sprint-name"},[t._v(t._s(t.sprint.name))]),t._v(" "),i("div",{staticClass:"sprint-start-date"},[i("span",[t._v(t._s(t._f("dateFilter")(t.sprint.startDate,"yyyy年MM月dd日"))+" ~")]),t._v(" "),i("span",[t._v(t._s(t._f("dateFilter")(t.sprint.publishDate,"yyyy年MM月dd日")))])])]),t._v(" "),i("div",{staticClass:"header-right"},[i("span",[t._v("导出：")]),t._v(" "),i("i",{staticClass:"fa fa-sort-numeric-asc",on:{click:t.onExportBacklog}}),t._v(" "),i("i",{staticClass:"fa fa-tasks",on:{click:t.onExportTask}}),t._v(" "),i("i",{staticClass:"fa fa-bug",on:{click:t.onExportBug}})])]),t._v(" "),i("div",{staticClass:"sprint-detail"},[i("div",{staticClass:"sprint-team"},[i("span",{staticClass:"sprint-title"},[t._v("团队：")]),t._v(" "),i("span",[t._v(t._s(t.sprint.teams.length)+"人")]),t._v(" "),t._l(t.sprint.teams,function(s,a){return i("img",{key:a,attrs:{src:t.headUrl+s.email,alt:""}})})],2),t._v(" "),i("div",{staticClass:"sprint-value"},[i("span",{staticClass:"sprint-title"},[t._v("价值：")]),t._v(" "),i("span",[t._v(t._s(t.sprint.value))])]),t._v(" "),i("div",{staticClass:"sprint-value"},[i("span",{staticClass:"sprint-title"},[t._v("故事数量：")]),t._v(" "),i("span",[t._v(t._s(t.backlogCount))])]),t._v(" "),i("div",{staticClass:"sprint-value"},[i("span",{staticClass:"sprint-title"},[t._v("缺陷数量：")]),t._v(" "),i("span",[t._v(t._s(t.bugCount))])]),t._v(" "),i("div",{staticClass:"sprint-value"},[i("span",{staticClass:"sprint-title"},[t._v("计划会议：")]),t._v(" "),t._l(t.sprint.planMeetings,function(s,a){return i("span",{key:a},[t._v("\n          "+t._s(t._f("dateFilter")(s.date,"yyyy年MM月dd日"))+"\n          "+t._s(s.note)+"；\n        ")])})],2),t._v(" "),i("div",{staticClass:"sprint-value"},[i("span",{staticClass:"sprint-title"},[t._v("演示会议：")]),t._v(" "),i("span",[t._v(t._s(t._f("dateFilter")(t.sprint.demoMeeting,"yyyy年MM月dd日")))])])])])],1)},staticRenderFns:[]};var o=i("VU/8")({data:function(){return{headUrl:this.$ccService.ccHeadUrl,bugCount:0,backlogCount:0}},props:["sprint"],methods:{initData:function(){this.findBugCount(),this.findBacklogCount()},findBugCount:function(){var t=this,s={sprintId:this.sprint.id,state:5};this.$dataService.findCount("bugs",s).then(function(s){t.bugCount=s})},findBacklogCount:function(){var t=this;this.findCondition={sprintId:this.sprint.id},this.findDataByCondition("backlogs").then(function(s){t.backlogCount=s.length||0})},onExportBacklog:function(){var t=this,s={query:{productId:this.sprint.productId,sprintId:this.sprint.id},sort:{important:-1}};this.$http.post("/excel/export/backlog/rtc",s,{responseType:"arraybuffer"}).then(function(s){s&&s.data&&t.downloadExcel(s.data,t.sprint.name+"backlog.xls")})},onExportTask:function(){var t=this,s={query:{productId:this.sprint.productId,sprintId:this.sprint.id},sort:{important:-1}};this.$http.post("/excel/export/task/rtc",s,{responseType:"arraybuffer"}).then(function(s){s&&s.data&&t.downloadExcel(s.data,t.sprint.name+"task.xls")})},onExportBug:function(){var t=this,s={query:{productId:this.sprint.productId,sprintId:this.sprint.id},sort:{createTime:-1}};this.$http.post("/excel/export/bug/rtc",s,{responseType:"arraybuffer"}).then(function(s){s&&s.data&&t.downloadExcel(s.data,t.sprint.name+"bug.xls")})}}},c,!1,function(t){i("UKlV")},"data-v-260a7596",null).exports,p=i("NYxO"),d={components:{ProductTab:r.a,AddButton:e.a,SprintItem:o},data:function(){return{}},computed:{sprintList:function(){return this.$store.state.sprint.sprintList}},methods:n()({onProductClick:function(t){this.switchProduct(t)},onAddData:function(){this.$router.push({name:"sprintDetail"})},onEditSprint:function(t){this.$router.push({name:"sprintDetail",params:{id:t.id}})}},Object(p.b)(["switchProduct"]))},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("panel",[i("div",{staticClass:"sprint-list-wrapper"},[i("product-tab",{staticClass:"product-tabs",on:{onTabClick:t.onProductClick}}),t._v(" "),i("div",{staticClass:"sprint-list-content"},[i("div",{staticClass:"sprint-list-toolbar"},[i("add-button",{on:{onClick:t.onAddData}})],1),t._v(" "),i("div",{staticClass:"sprint-list"},t._l(t.sprintList,function(s){return i("sprint-item",{key:s.id,attrs:{sprint:s},nativeOn:{dblclick:function(i){t.onEditSprint(s)}}})}))])],1),t._v(" "),i("transition",{attrs:{mode:"out-in",name:"fade",appear:""}},[i("router-view")],1)],1)},staticRenderFns:[]};var u=i("VU/8")(d,l,!1,function(t){i("xRcs")},"data-v-d260fd92",null);s.default=u.exports},UKlV:function(t,s){},xRcs:function(t,s){}});
//# sourceMappingURL=19.0679671dd036f5d3d08c.js.map